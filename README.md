# Практическая работа №6

### Тема: Работа с Conduit
### Цель работы: реализовать cоздание API при помощи пакета Conduit. Функции: регистрация, авторизация, RefreshToken, Вывод данных пользователя, редактирование данных пользователя, изменение пароля пользователя, CRUD действия по теме, поиск, фильтрация, логическое удаление и восстановление, история действий.

###
### Ход работы:
### Для начала работы необходимо создать новую базу данных в PgAdmin для того, чтобы в дальнейшем создать там таблицы.
!
###
### После в папку проекта необходимо положить файл database.yaml с характеристиками базы данных, такие как: юзернейм, пароль, хост, порт, имя базы данных. 
!
!
!
### 
### 
!
### После создается новый терминал, где необходимо применить команды: "dart pub run conduit:conduit db generate", "dart pub run conduit:conduit db validate", "dart pub run conduit:conduit db upgrade" для инициализации БД в pgAdmin.
### 
!
###
### Далее необходимо перейти к созданию сущнностей. Список готовых сущностей представлен ниже.
!
!
###
### После необходимо перейти к реализации регистрации. Для этого понадобятся файлы "user.dart" и "app_auth_controller". В сущности пользователя хранятся элементы таблицы, такие как: имя пользователя, почта, пароль, accessToken, refreshToken, также salt и hashPassword. Для регистрации был использован метод PUT. После необходимо протестировать работоспособность регистрации в Thunder Client с помощью запроса "http://localhost:8888/token"
!
!
###
### Далее необходимо перейти к реализации авторизации. Для этого так же понадобятся файлы "user.dart" и "app_auth_controller". Для авторизации был использован метод POST. После необходимо протестировать работоспособность авторизации в Thunder Client с помощью запроса "http://localhost:8888/token"
!
!
###
### Далее необходимо перейти к реализации получения и редактирования профиля. Для этого понадобятся файлы "user.dart" и "app_user_controller". Для получения и редактирования профиля были использованы методы GET и POST. После необходимо протестировать работоспособность авторизации в Thunder Client с помощью запроса "http://localhost:8888/user"
!
!
###
### Далее необходимо перейти к реализации получения и редактирования профиля. Для этого понадобятся файлы "user.dart" и "app_user_controller". Для получения и редактирования профиля были использованы методы GET и POST. После необходимо протестировать работоспособность авторизации в Thunder Client с помощью запроса "http://localhost:8888/user" и методами GET и POST для получения и редактирования профиля соответственно.
!
!
###
### Также необходимо реализовать обновление пароля. Для этого понадобятся файлы "user.dart" и "app_user_controller.dart". Для обновления пароля был использован метод POST. После необходимо протестировать работоспособность авторизации в Thunder Client с помощью запроса "http://localhost:8888/user" и указанием параметров query "oldPassword" и "newPassword".
!
###
### На рисунке ниже продемонстрированы данные, которые хранятся в БД.
!
!
###
### Далее необходимо перейти к реализации создания заметки. Для этого понадобятся файлы "note.dart" и "app_note_controller". В сущности заметки хранятся элементы таблицы, такие как: число, описание, имя, категория, дата создания, также дата редактирования и логическое удаление. Для создания заметки были использован метод POST. После необходимо протестировать работоспособность авторизации в Thunder Client с помощью запроса "http://localhost:8888/notes?search=/b/". На рисунке будет указано, что заметка не найдена, так как поиск осуществляется не по категории, а по имени, поэтому правильным запросом в данной ситуации будет "http://localhost:8888/notes?search=aboba". Также существует запрос для вывода всех заметок "http://localhost:8888/notes" с методом GET.
!
!
!
###
### Далее необходимо перейти к реализации поиска заметок. Для этого понадобятся файлы "note.dart" и "app_note_controller". Для поиска заметки были использован метод GET. После необходимо протестировать работоспособность авторизации в Thunder Client с помощью запроса "http://localhost:8888/notes?search=/b/". На рисунке будет указано, что заметка не найдена, так как поиск осуществляется не по категории, а по имени. 
!
! 
###
### Далее необходимо перейти к реализации удаления заметки. Для этого понадобятся файлы "note.dart" и "app_note_controller". Для удаления заметки были использован метод DELETE. После необходимо протестировать работоспособность авторизации в Thunder Client с помощью запроса "http://localhost:8888/notes/3".
!
! 
###
### Далее необходимо перейти к реализации восстановления заметки. Для этого понадобятся файлы "note.dart" и "app_note_controller". Для восстановления заметки понадобился метод GET. После необходимо протестировать работоспособность авторизации в Thunder Client с помощью запроса "http://localhost:8888/notes/5?restore" с использованием query-параметра "restore".
!
!
###
### После необходимо перейти к реализации фильтрации. Для этого понадобятся файлы "note.dart" и "app_note_controller". Для фильтрации используется метод GET. После необходимо протестировать работоспособность авторизации в Thunder Client с помощью запроса "http://localhost:8888/notes?deleted=0" с использованием query-параметра "deleted".
!
!
!
###
### В конце необходимо создать историю всех действий. В сущности истории хранятся элементы таблицы, такие как: id, действие, которое было произведено и дата редактирования. Для создания истории всех действий был использован метод GET. После необходимо протестировать работоспособность авторизации в Thunder Client с помощью запроса "http://localhost:8888/history".
!
!
###
### Вывод: В данной практической работе была произведена первичная работа с Conduit. Были реализованы функции: регистрация, авторизация, RefreshToken, Вывод данных пользователя, редактирование данных пользователя, изменение пароля пользователя, CRUD действия по теме, поиск, фильтрация, логическое удаление и восстановление, история действий.
